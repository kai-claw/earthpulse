import{g as I,a as j,b as z,c as B,j as u,H as _,d as T,e as F}from"./index-DbwXOTSk.js";import{r as a}from"./vendor-icons-Bvhs5EwT.js";import{G as O}from"./vendor-globe-L89YmC25.js";import"./vendor-date-D5ebMS61.js";import"./vendor-three-BSf_rWJc.js";function N({earthquakes:p,tectonicPlates:h,showTectonicPlates:M,showHeatmap:s,showSeismicRings:L,showSeismicNetwork:m,showEnergyHeatmap:b,onEarthquakeClick:f,animationSpeed:x,timelapseProgress:l,flyToTarget:n,onFlyToComplete:v}){const r=a.useRef(null),k=a.useRef(null),[c,C]=a.useState(!1),[o,w]=a.useState([]),[g,R]=a.useState({width:0,height:0}),$=L?I(o):[],D=a.useMemo(()=>m?j(o):[],[m,o]),A=a.useMemo(()=>b?z(o):[],[b,o]);a.useEffect(()=>{const t=k.current;if(!t)return;const e=()=>{const d=t.getBoundingClientRect();R({width:Math.floor(d.width),height:Math.floor(d.height)})};e();const i=new ResizeObserver(e);return i.observe(t),()=>i.disconnect()},[]),a.useEffect(()=>{if(l>=0&&l<=1){const t=[...p].sort((i,d)=>i.time-d.time),e=Math.floor(l*t.length);w(t.slice(0,e))}else w(p)},[p,l]),a.useEffect(()=>{if(r.current&&c){const t=r.current.controls();t&&(t.autoRotate=!0,t.autoRotateSpeed=x)}},[c,x]),a.useEffect(()=>{if(n&&r.current&&c){const t=Math.max(.5,2.5-n.magnitude*.15);r.current.pointOfView({lat:n.lat,lng:n.lng,altitude:t},1500);const e=setTimeout(v,1600);return()=>clearTimeout(e)}},[n,c,v]);const S=a.useCallback(t=>{f(t)},[f]),E=a.useCallback(t=>{const e=t;return s?B(e.magnitude):e.color},[s]),y=a.useCallback(t=>{const e=t;return s?e.magnitude*.2:e.size},[s]),P=a.useCallback(t=>{const e=t;return`
      <div style="background: rgba(10,14,26,0.92); color: white; padding: 12px 16px; border-radius: 10px; font-size: 12px; border: 1px solid rgba(255,255,255,0.12); backdrop-filter: blur(8px); min-width: 180px; box-shadow: 0 8px 24px rgba(0,0,0,0.4);">
        <div style="font-size: 20px; font-weight: 800; color: ${e.magnitude>=6?"#ef4444":e.magnitude>=4?"#f59e0b":"#60a5fa"}; margin-bottom: 4px;">M${e.magnitude.toFixed(1)}</div>
        <div style="font-weight: 600; margin-bottom: 8px; line-height: 1.3;">${e.place}</div>
        <div style="color: rgba(255,255,255,0.6); display: flex; justify-content: space-between; gap: 16px;">
          <span>Depth: ${e.depth.toFixed(1)} km</span>
          <span>${new Date(e.time).toLocaleString()}</span>
        </div>
      </div>
    `},[]),G=a.useCallback(t=>t.color,[]);return u.jsxs("div",{ref:k,className:"globe-wrapper",role:"img","aria-label":`Interactive 3D globe showing ${o.length} earthquakes. Click and drag to rotate. Scroll to zoom.`,style:{width:"100%",height:"100%",position:"relative"},children:[g.width>0&&g.height>0&&u.jsx(O,{ref:r,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",pointsData:o,pointAltitude:.01,pointColor:E,pointRadius:y,pointResolution:8,onPointClick:S,pointLabel:P,ringsData:$,ringLat:t=>t.lat,ringLng:t=>t.lng,ringColor:G,ringMaxRadius:t=>t.maxR,ringPropagationSpeed:t=>t.propagationSpeed,ringRepeatPeriod:t=>t.repeatPeriod,ringAltitude:.002,ringResolution:48,arcsData:D,arcStartLat:t=>t.startLat,arcStartLng:t=>t.startLng,arcEndLat:t=>t.endLat,arcEndLng:t=>t.endLng,arcColor:t=>t.color,arcStroke:t=>t.stroke,arcDashLength:t=>t.dashLength,arcDashGap:t=>t.dashGap,arcDashAnimateTime:t=>t.dashAnimateTime,arcAltitude:t=>t.altitude,arcLabel:t=>`<div style="background: rgba(10,14,26,0.92); color: white; padding: 8px 12px; border-radius: 8px; font-size: 11px; border: 1px solid rgba(168,85,247,0.3); backdrop-filter: blur(8px);">
              <div style="font-weight: 600; color: #a78bfa;">ðŸ”— Seismic Connection</div>
              <div style="margin-top: 4px; color: rgba(255,255,255,0.8);">${t.label}</div>
            </div>`,heatmapsData:A.length>0?[A]:[],heatmapPoints:".",heatmapPointLat:t=>t.lat,heatmapPointLng:t=>t.lng,heatmapPointWeight:t=>t.weight,heatmapBandwidth:F,heatmapTopAltitude:T,heatmapBaseAltitude:_,heatmapColorSaturation:2.5,heatmapColorFn:t=>{if(t<.33){const e=t/.33;return`rgba(${Math.round(30+e*70)}, ${Math.round(100+e*60)}, ${Math.round(200-e*50)}, ${.4+e*.2})`}else if(t<.66){const e=(t-.33)/.33;return`rgba(${Math.round(100+e*155)}, ${Math.round(160-e*60)}, ${Math.round(150-e*120)}, ${.6+e*.15})`}else{const e=(t-.66)/.34;return`rgba(${Math.round(255)}, ${Math.round(100-e*60)}, ${Math.round(30)}, ${.75+e*.2})`}},pathsData:M&&h?h.features:[],pathColor:()=>"rgba(255, 120, 30, 0.65)",pathStroke:1.5,pathDashLength:.08,pathDashGap:.04,pathDashAnimateTime:4e3,animateIn:!0,waitForGlobeReady:!0,onGlobeReady:()=>C(!0),enablePointerInteraction:!0,showGlobe:!0,showAtmosphere:!0,atmosphereColor:"#6ba3ff",atmosphereAltitude:.2,width:g.width,height:g.height}),u.jsx("style",{children:`
        .globe-wrapper canvas {
          cursor: grab;
        }
        .globe-wrapper canvas:active {
          cursor: grabbing;
        }
        .scene-tooltip {
          pointer-events: none;
          font-family: 'Inter', sans-serif;
        }
      `})]})}export{N as default};
