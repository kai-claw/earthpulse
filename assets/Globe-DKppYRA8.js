import{g as F,a as _,b as O,c as U,j as m,H as W,d as H,e as V}from"./index-CqfHV_Ab.js";import{r as o}from"./vendor-icons-Bvhs5EwT.js";import{G as N}from"./vendor-globe-L89YmC25.js";import"./vendor-date-D5ebMS61.js";import"./vendor-three-BSf_rWJc.js";const q=t=>t.lat,J=t=>t.lng,K=t=>t.maxR,Q=t=>t.propagationSpeed,X=t=>t.repeatPeriod,Y=t=>t.startLat,Z=t=>t.startLng,tt=t=>t.endLat,et=t=>t.endLng,at=t=>t.color,ot=t=>t.stroke,nt=t=>t.dashLength,rt=t=>t.dashGap,st=t=>t.dashAnimateTime,it=t=>t.altitude,ct=t=>t.lat,lt=t=>t.lng,gt=t=>t.weight,dt=()=>"rgba(255, 120, 30, 0.65)",ut=t=>`<div style="background: rgba(10,14,26,0.92); color: white; padding: 8px 12px; border-radius: 8px; font-size: 11px; border: 1px solid rgba(168,85,247,0.3); backdrop-filter: blur(8px);">
    <div style="font-weight: 600; color: #a78bfa;">ðŸ”— Seismic Connection</div>
    <div style="margin-top: 4px; color: rgba(255,255,255,0.8);">${t.label}</div>
  </div>`;function pt(t){if(t<.33){const n=t/.33;return`rgba(${Math.round(30+n*70)}, ${Math.round(100+n*60)}, ${Math.round(200-n*50)}, ${.4+n*.2})`}else if(t<.66){const n=(t-.33)/.33;return`rgba(${Math.round(100+n*155)}, ${Math.round(160-n*60)}, ${Math.round(150-n*120)}, ${.6+n*.15})`}else{const n=(t-.66)/.34;return`rgba(${Math.round(255)}, ${Math.round(100-n*60)}, ${Math.round(30)}, ${.75+n*.2})`}}function At({earthquakes:t,tectonicPlates:n,showTectonicPlates:b,showHeatmap:c,showSeismicRings:f,showSeismicNetwork:x,showEnergyHeatmap:A,onEarthquakeClick:L,animationSpeed:M,timelapseProgress:l,flyToTarget:s,onFlyToComplete:v}){const i=o.useRef(null),C=o.useRef(null),[g,w]=o.useState(!1),[r,k]=o.useState([]),[d,S]=o.useState({width:0,height:0}),$=o.useMemo(()=>f?F(r):[],[f,r]),E=o.useMemo(()=>x?_(r):[],[x,r]),u=o.useMemo(()=>A?O(r):[],[A,r]),p=o.useMemo(()=>[...t].sort((e,a)=>e.time-a.time),[t]);o.useEffect(()=>{const e=C.current;if(!e)return;let a=null;const h=()=>{const R=e.getBoundingClientRect();S({width:Math.floor(R.width),height:Math.floor(R.height)})};h();const D=new ResizeObserver(()=>{a&&clearTimeout(a),a=setTimeout(h,100)});return D.observe(e),()=>{D.disconnect(),a&&clearTimeout(a)}},[]),o.useEffect(()=>{if(l>=0&&l<=1){const e=Math.floor(l*p.length);k(p.slice(0,e))}else k(t)},[t,p,l]),o.useEffect(()=>{if(i.current&&g){const e=i.current.controls();e&&(e.autoRotate=!0,e.autoRotateSpeed=M)}},[g,M]),o.useEffect(()=>{if(s&&i.current&&g){const e=Math.max(.5,2.5-s.magnitude*.15);i.current.pointOfView({lat:s.lat,lng:s.lng,altitude:e},1500);const a=setTimeout(v,1600);return()=>clearTimeout(a)}},[s,g,v]);const y=o.useCallback(e=>{L(e)},[L]),G=o.useCallback(e=>{const a=e;return c?U(a.magnitude):a.color},[c]),I=o.useCallback(e=>{const a=e;return c?a.magnitude*.2:a.size},[c]),P=o.useCallback(e=>{const a=e;return`
      <div style="background: rgba(10,14,26,0.92); color: white; padding: 12px 16px; border-radius: 10px; font-size: 12px; border: 1px solid rgba(255,255,255,0.12); backdrop-filter: blur(8px); min-width: 180px; box-shadow: 0 8px 24px rgba(0,0,0,0.4);">
        <div style="font-size: 20px; font-weight: 800; color: ${a.magnitude>=6?"#ef4444":a.magnitude>=4?"#f59e0b":"#60a5fa"}; margin-bottom: 4px;">M${a.magnitude.toFixed(1)}</div>
        <div style="font-weight: 600; margin-bottom: 8px; line-height: 1.3;">${a.place}</div>
        <div style="color: rgba(255,255,255,0.6); display: flex; justify-content: space-between; gap: 16px;">
          <span>Depth: ${a.depth.toFixed(1)} km</span>
          <span>${new Date(a.time).toLocaleString()}</span>
        </div>
      </div>
    `},[]),z=o.useCallback(e=>e.color,[]),T=o.useMemo(()=>u.length>0?[u]:[],[u]),j=o.useMemo(()=>b&&n?n.features:[],[b,n]),B=o.useCallback(()=>w(!0),[]);return m.jsxs("div",{ref:C,className:"globe-wrapper",role:"img","aria-label":`Interactive 3D globe showing ${r.length} earthquakes. Click and drag to rotate. Scroll to zoom.`,style:{width:"100%",height:"100%",position:"relative"},children:[d.width>0&&d.height>0&&m.jsx(N,{ref:i,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",pointsData:r,pointAltitude:.01,pointColor:G,pointRadius:I,pointResolution:8,onPointClick:y,pointLabel:P,ringsData:$,ringLat:q,ringLng:J,ringColor:z,ringMaxRadius:K,ringPropagationSpeed:Q,ringRepeatPeriod:X,ringAltitude:.002,ringResolution:48,arcsData:E,arcStartLat:Y,arcStartLng:Z,arcEndLat:tt,arcEndLng:et,arcColor:at,arcStroke:ot,arcDashLength:nt,arcDashGap:rt,arcDashAnimateTime:st,arcAltitude:it,arcLabel:ut,heatmapsData:T,heatmapPoints:".",heatmapPointLat:ct,heatmapPointLng:lt,heatmapPointWeight:gt,heatmapBandwidth:V,heatmapTopAltitude:H,heatmapBaseAltitude:W,heatmapColorSaturation:2.5,heatmapColorFn:pt,pathsData:j,pathColor:dt,pathStroke:1.5,pathDashLength:.08,pathDashGap:.04,pathDashAnimateTime:4e3,animateIn:!0,waitForGlobeReady:!0,onGlobeReady:B,enablePointerInteraction:!0,showGlobe:!0,showAtmosphere:!0,atmosphereColor:"#6ba3ff",atmosphereAltitude:.2,width:d.width,height:d.height}),m.jsx("style",{children:`
        .globe-wrapper canvas {
          cursor: grab;
        }
        .globe-wrapper canvas:active {
          cursor: grabbing;
        }
        .scene-tooltip {
          pointer-events: none;
          font-family: 'Inter', sans-serif;
        }
      `})]})}export{At as default};
